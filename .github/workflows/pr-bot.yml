name: PR Bot
on: [workflow_dispatch]
jobs:
  search-for-prs:
    runs-on: ubuntu-latest
    environment: development
    env:
      GH_TOKEN: ${{ secrets.LO_GITHUB_TOKEN }}
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v2.3.1

      - name: Get PR Review Requests 🔎
        run: |
          gh api '/search/issues?q=is:open%20is:pr%20org:legalforce%20review-requested:calbert1209&advance_search=true' |
          jq -r ".items | .[] | { number:.number, title: .title, author: .user.login, createdAt: .created_at, url: .html_url, repo: .repository_url | split(\"/\") | .[-1] }" > result.json

      - name: Report Review Requests 🙏🏻
        run: cat result.json

